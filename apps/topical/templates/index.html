[[extend 'layout.html']]

<div class="section" id="app">
<!-- Complete.  -->
  <template id="post-list-template">
    <div>
      <div v-for="post in posts" :key="post.id" class="post">
        <p class="post-content">{{ post.content }}</p>
        <div class="tags">
          <span v-for="tag in post.tags" :key="tag.id" class="tag">
            {{ tag.name  }}
          </span>
        </div>
        <button
          v-if="post.user_id === $root.user?.id"
          class="delete-button"
          @click="$emit('on-delete', post.id)"
        >
          Delete
        </button>
      </div>
    </div>
  </template>
  <template id="tag-list-template">
    <div>
      <button
        v-for="tag in tags"
        :key="tag.id"
        :class="{ active: activeTags.includes(tag.name) }"
        class="tag"
        @click="$emit('on-toggle', tag.name)"
      >
        {{ tag.name }}
      </button>
    </div>
  </template>
  <template id="post-creation-template">
    <div class="post-creation">
      <textarea
        id="post-input"
        v-model="newPostContent"
        placeholder="Write your post here... "
      ></textarea>
      <button id="post-button" @click="$emit('on-create')">Create Post</button>
    </div>
  </template>
</div>

[[block page_scripts]]
<script>
  // Complete.
</script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js"></script>
<script src="[[=URL('static/js/index.js')]]"></script>
[[end]]
