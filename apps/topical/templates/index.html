[[extend 'layout.html']]

<div class="section" id="app">
<!-- Complete.  -->
<div class="columns">
  <div class="column is-three-quarters">
    <div>
      <textarea
        id="post-input"
        v-model="newPostContent"
        placeholder="Write your post here... "
      ></textarea>
      <button id="post-button" @click="createPost">Create Post</button>
    </div>
    <div>
      <div v-for="post in filteredPosts" :key="post.id" class="post">
        <p class="post-content">{{ post.content }}</p>
        <p>Post User ID: {{ post.user_id }} (Type: {{ typeof post.user_id }})</p>
        <p>Logged-in User ID: {{ user }} (Type: {{ typeof user }})</p>
        <p>Comparison: {{ post.user_id === user }}</p> 
        <div class="tags">
          <span v-for="tag in post.tags" :key="tag.id" class="tag">
            {{ tag.name }}
          </span>
        </div>
        <button
          v-if="(post.user_id) === (user)"
          class="delete-button"
          @click="deletePost(post.id)"
        >
          Delete
        </button>
      </div>
    </div>
  </div>

  <div class="column is-one-quarter">
    <div class="box">
      <h3 class="title is-4">Tags</h3>
        <button
          v-for="tag in tags"
          :key="tag.id"
          :class="{ active: activeTags.includes(tag.name) }"
          class="tag"
          @click="toggleTag(tag.name)"
        >
            {{ tag.name }}
        </button>
    </div>
  </div>
</div>

[[block page_scripts]]
<script>
  // Complete.
  const userId = {{=user_id}};
</script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.8/axios.min.js"></script>
<script src="[[=URL('static/js/index.js')]]"></script>
[[end]]
